<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.bundle.min.js"></script>
    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="css/style.css" />

    <title>Тестовое задание #2</title>
  </head>
  <body class="body">
    <div class="container">
      <canvas id="myChart" width="600" height="400"></canvas>
    </div>
    <script>
      $(document).ready(function () {
        $.ajax({
          url: "php/dashboard.php",
          type: "get",
          contentType: false,
          processData: false,
          success: function (response) {
            if (response == 404) {
              alert(404);
            } else {
            }
          },
        });
      });

      var ctx = document.getElementById("myChart").getContext("2d");
      var myChart = new Chart(ctx, {
        type: 'pie',
        data: {
          labels: [
            "Dairy",
            "Fruits",
            "Lean meats",
            "Vegetables",
            "Whole grains",
          ],
          datasets: [
            {
              data: [27.92, 17.53, 14.94, 26.62, 12.99],
              backgroundColor: [
                "#e91e63",
                "#00e676",
                "#ff5722",
                "#1e88e5",
                "#ffd600",
              ],
              borderWidth: 0.5,
              borderColor: "#ddd",
            },
          ],
        },
        options: {
          title: {
            display: true,
            text: "Recommended Daily Diet",
            position: "top",
            fontSize: 16,
            fontColor: "#111",
            padding: 20,
          },
          legend: {
            display: true,
            position: "bottom",
            labels: {
              boxWidth: 20,
              fontColor: "#111",
              padding: 15,
            },
          },
          tooltips: {
            enabled: false,
          },
          plugins: {
            datalabels: {
              color: "#111",
              textAlign: "center",
              font: {
                lineHeight: 1.6,
              },
              formatter: function (value, ctx) {
                return (
                  ctx.chart.data.labels[ctx.dataIndex] + "\n" + value + "%"
                );
              },
            },
          },
        },
      });
    </script>
  </body>
</html>
